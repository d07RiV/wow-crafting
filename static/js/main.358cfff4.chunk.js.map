{"version":3,"sources":["select/SelectMenu.js","select/index.js","nexushub.js","data.js","logic.js","App.js","index.js"],"names":["optionId","opt","id","SelectOption","depth","value","disabled","selected","setValue","setFocus","renderOption","search","onSelect","React","useCallback","onFocus","className","classNames","onClick","onMouseOver","SelectGroup","title","renderHeader","SelectSearch","forwardRef","ref","onChange","onInputChanged","e","target","type","spellCheck","icon","faSearch","SelectMenu","props","getOptions","options","isDisabled","searchMiddle","searchLimit","searchFunc","onClose","valueDiv","align","maxHeight","noResultsText","virtualScroll","menuRef","useState","searchTerm","setSearch","firstBlock","setFirstBlock","optionsRaw","useMemo","enableSearch","countOptions","list","reduce","total","str","middle","prefix","match","suffix","trim","replace","RegExp","makeRegex","flattenOptions","groups","result","forEach","ngroups","sub","length","push","join","focusedId","focusedIndex","idx","findIndex","useRef","scrollRef","searchRef","scrolledIndexRef","lineHeight","useEffect","line","current","querySelector","offsetHeight","onScroll","Math","max","floor","scrollTop","useLayoutEffect","node","mode","scrollIntoView","scrollMode","block","inline","boundary","includes","focus","onBlur","relatedTarget","contains","onKeyDown","key","prev","index","prevValid","next","nextValid","visibleOptions","renderFirst","renderLast","min","ceil","slice","mergedRef","refs","chainedRef","tabIndex","style","marginTop","marginBottom","map","optionName","name","underlinerFunc","regex","found","split","defaultCallbacks","renderValue","placeholder","term","Select","memo","width","menuClass","allowEmpty","otherProps","isOpen","setOpen","onToggle","open","valueRef","overflowParent","parentNode","parentStyle","window","getComputedStyle","document","documentElement","overflow","parentElement","parentBox","getBoundingClientRect","parentTop","top","parseFloat","paddingTop","borderTopWidth","parentBottom","bottom","paddingBottom","borderBottomWidth","valueBox","height","useImperativeHandle","onSetValue","onClear","stopPropagation","menu","faLock","faChevronDown","faTimes","serverList","fetch","then","r","json","dataCache","loadData","server","faction","slug","Promise","all","alliance","horde","keys","Set","Object","fromEntries","a","h","quantity","marketValue","data","itemId","assign","crafting","quests","process","item","results","Error","info","Data","quality","vendor","vendorPrice","category","reagents","requiredMoney","amountCrafted","craftMin","craftMax","craftingPrice","entries","bindOnPickup","price","Infinity","filter","x","isNaN","n","usePersistentState","initialValue","localStorage","getItem","JSON","parse","error","console","setItem","stringify","serverOptions","servers","regions","region","sort","name1","name2","localeCompare","factionOptions","profNames","alchemy","blacksmithing","cooking","enchanting","engineering","firstaid","leatherworking","tailoring","categoryNames","quest","tierset","itemOptions","categories","cat","Money","isFinite","gold","silver","copper","itemDefault","overrides","itemPrice","profLabel","shoppingList","count","numCraft","money","ItemLink","href","rel","ResultView","setOverrides","setShopping","setMarket","ov","setCrafting","addShopping","s","Fragment","cprice","ShoppingItem","parseInt","ShoppingList","shopping","cur","p","p1","s1","p2","s2","clearList","preventDefault","renderItem","App","setServerList","setServer","setFaction","setResults","onServerChange","v","onFactionChange","onItemChange","toCalc","calculate","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.358cfff4.chunk.js","sourcesContent":["import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons'\r\nimport scrollIntoView from 'scroll-into-view-if-needed';\r\n\r\nfunction chainedRef(...refs) {\r\n  return value => {\r\n    for (const ref of refs) {\r\n      if (typeof ref === \"function\") {\r\n        ref(value);\r\n      } else if (ref) {\r\n        ref.current = value;\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nconst optionId = opt => typeof opt === \"object\" ? opt.id : opt;\r\n\r\nfunction SelectOption({ id, depth, value, disabled, selected, setValue, setFocus, renderOption, search }) {\r\n  const onSelect = React.useCallback(() => setValue(value), [value, setValue]);\r\n  const onFocus = React.useCallback(() => setFocus(id), [id, setFocus]);\r\n  return (\r\n    <li className={classNames(`ui-Select-option depth-${depth}`, {\"option-selected\": selected, \"option-disabled\": disabled})} onClick={disabled ? null : onSelect} onMouseOver={disabled ? null : onFocus}>\r\n      {renderOption(value, search)}\r\n    </li>\r\n  );\r\n}\r\n\r\nfunction SelectGroup({ depth, title, renderHeader }) {\r\n  return (\r\n    <li className={`ui-Select-group depth-${depth}`}>\r\n      {renderHeader(title)}\r\n    </li>\r\n  );\r\n}\r\n\r\nconst makeRegex = (str, middle) => {\r\n  const prefix = (middle && !str.match(/^\\s/) ? \"\" : \"\\\\b\") + \"(\";\r\n  const suffix = \")\" + (str.match(/\\s$/) ? \"\\\\b\" : \"\");\r\n  str = str.trim().replace(/[-[\\]/{}()*+?.\\\\^$|]/g, \"\\\\$&\");\r\n  if (!str) return;\r\n  return new RegExp(prefix + str + suffix, \"i\");\r\n};\r\n\r\nfunction prevValid(options, index) {\r\n  while (--index >= 0) {\r\n    if (options[index].value != null && !options[index].disabled) {\r\n      return index;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\nfunction nextValid(options, index) {\r\n  while (++index < options.length) {\r\n    if (options[index].value != null && !options[index].disabled) {\r\n      return index;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\nconst SelectSearch = React.forwardRef(({value, onChange}, ref) => {\r\n  const onInputChanged = React.useCallback(e => onChange(e.target.value), [onChange]);\r\n  return (\r\n    <div className=\"ui-Select-search\">\r\n      <input type=\"text\" value={value} onChange={onInputChanged} ref={ref} spellCheck={false}/>\r\n      <FontAwesomeIcon icon={faSearch} className={\"search-icon\"}/>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst RENDER_BLOCK = 10;\r\n\r\nexport default function SelectMenu(props) {\r\n  const {\r\n    options: getOptions,\r\n    className,\r\n    renderOption,\r\n    isDisabled,\r\n    renderHeader,\r\n    value,\r\n    setValue,\r\n    searchMiddle,\r\n    searchLimit,\r\n    searchFunc,\r\n    onClose,\r\n    valueDiv,\r\n    align,\r\n    maxHeight,\r\n    noResultsText,\r\n    virtualScroll,\r\n    menuRef\r\n  } = props;\r\n\r\n  const [searchTerm, setSearch] = React.useState(\"\");\r\n  const [firstBlock, setFirstBlock] = React.useState(0);\r\n\r\n  const optionsRaw = React.useMemo(() => typeof getOptions === \"function\" ? getOptions() : getOptions, [getOptions]);\r\n\r\n  const { options, enableSearch, search } = React.useMemo(() => {\r\n    const countOptions = list => list.reduce((total, opt) => total + (opt.options ? countOptions(opt.options) : 1), 0);\r\n    const enableSearch = searchLimit >= 0 && countOptions(optionsRaw) >= searchLimit;\r\n    const search = (searchTerm && enableSearch ? makeRegex(searchTerm, searchMiddle) : null);\r\n    const flattenOptions = (list, groups = []) => {\r\n      const result = [];\r\n      list.forEach(opt => {\r\n        if (opt.options) {\r\n          const ngroups = [...groups, opt.title];\r\n          const sub = flattenOptions(opt.options, ngroups);\r\n          if (sub.length) {\r\n            result.push({id: ngroups.join(\".\"), depth: groups.length, title: opt.title}, ...sub);\r\n          }\r\n        } else if (!search || searchFunc(opt, search)) {\r\n          result.push({id: optionId(opt), depth: groups.length, disabled: isDisabled(opt), value: opt});\r\n        }\r\n      });\r\n      return result;\r\n    };\r\n    return { options: flattenOptions(optionsRaw), enableSearch, search };\r\n  }, [optionsRaw, searchLimit, searchTerm, searchMiddle, searchFunc, isDisabled]);\r\n\r\n  const [focusedId, setFocus] = React.useState(value != null ? optionId(value) : null);\r\n  const focusedIndex = React.useMemo(() => {\r\n    const idx = options.findIndex(opt => opt.id === focusedId && !opt.disabled);\r\n    return idx >= 0 ? idx : options.findIndex(opt => opt.value != null && !opt.disabled);\r\n  }, [focusedId, options]);\r\n\r\n  const ref = React.useRef();\r\n  const scrollRef = React.useRef();\r\n  const searchRef = React.useRef();\r\n  const scrolledIndexRef = React.useRef(-1);\r\n\r\n  const lineHeight = React.useRef(18);\r\n  React.useEffect(() => {\r\n    const line = scrollRef.current.querySelector(\"li\");\r\n    if (line) {\r\n      lineHeight.current = line.offsetHeight;\r\n    }\r\n  }, [options]);\r\n\r\n  const onScroll = React.useCallback(() => {\r\n    setFirstBlock(Math.max(Math.floor(scrollRef.current.scrollTop / lineHeight.current / RENDER_BLOCK) - 1, 0));\r\n  }, []);\r\n\r\n  React.useLayoutEffect(() => {\r\n    if (!scrollRef.current) return;\r\n    if (virtualScroll && scrolledIndexRef.current === focusedIndex) {\r\n      // little hack to prevent scroll being stuck when using virtual scroll\r\n      // this ensures we only scroll to selected element once\r\n      return;\r\n    }\r\n    const node = scrollRef.current.querySelector(\"li.option-selected\");\r\n    if (node) {\r\n      const mode = scrolledIndexRef.current < 0 ? \"center\" : \"nearest\";\r\n      scrollIntoView(node, {scrollMode: \"if-needed\", block: mode, inline: mode, boundary: scrollRef.current});\r\n      scrolledIndexRef.current = focusedIndex;\r\n      onScroll();\r\n    } else {\r\n      setFirstBlock(Math.floor(focusedIndex / RENDER_BLOCK));\r\n    }\r\n  }, [focusedIndex, virtualScroll, firstBlock, onScroll]);\r\n\r\n  React.useEffect(() => {\r\n    if (align.includes(\"ui-drop-test\")) return;\r\n    if (searchRef.current) {\r\n      searchRef.current.focus();\r\n    } else if (ref.current) {\r\n      ref.current.focus();\r\n    }\r\n  }, [align]);\r\n\r\n  const onBlur = React.useCallback(e => {\r\n    if (!e.relatedTarget || !(valueDiv.current.contains(e.relatedTarget) || ref.current.contains(e.relatedTarget))) {\r\n      onClose();\r\n    }\r\n  }, [valueDiv, onClose]);\r\n\r\n  const onKeyDown = React.useCallback(e => {\r\n    switch (e.key) {\r\n    case \"Up\":\r\n    case \"ArrowUp\":\r\n      if (focusedIndex >= 0) {\r\n        const prev = prevValid(options, focusedIndex);\r\n        if (prev >= 0) {\r\n          setFocus(options[prev].id);\r\n        }\r\n      }\r\n      break;\r\n    case \"Down\":\r\n    case \"ArrowDown\":\r\n      if (focusedIndex >= 0) {\r\n        const next = nextValid(options, focusedIndex);\r\n        if (next >= 0) {\r\n          setFocus(options[next].id);\r\n        }\r\n      }\r\n      break;\r\n    case \"Esc\":\r\n    case \"Escape\":\r\n      onClose();\r\n      valueDiv.current.focus();\r\n      break;\r\n    case \"Enter\":\r\n      if (focusedIndex >= 0) {\r\n        setValue(options[focusedIndex].value);\r\n      }\r\n      break;\r\n      // no default\r\n    }\r\n  }, [focusedIndex, options, onClose, setValue, valueDiv]);\r\n\r\n  let visibleOptions = options;\r\n  let renderFirst = 0, renderLast = options.length;\r\n  if (virtualScroll) {\r\n    renderFirst = firstBlock * RENDER_BLOCK;\r\n    renderLast = Math.min(renderFirst + (Math.ceil(maxHeight / lineHeight.current / RENDER_BLOCK) + 4) * RENDER_BLOCK, options.length);\r\n    visibleOptions = options.slice(renderFirst, renderLast);\r\n  }\r\n\r\n  const mergedRef = React.useMemo(() => chainedRef(ref, menuRef), [menuRef]);\r\n\r\n  return (\r\n    <div ref={mergedRef} className={classNames(\"ui-Select-menu\", align, className)} tabIndex=\"-1\" onBlur={onBlur} onKeyDown={onKeyDown} style={{maxHeight}}>\r\n      {!!enableSearch && <SelectSearch value={searchTerm} onChange={setSearch} ref={searchRef}/>}\r\n      <div ref={scrollRef} className=\"ui-menu-scroll\" onScroll={virtualScroll ? onScroll : null}>\r\n        {options.length ? (\r\n          <ul style={{marginTop: renderFirst * lineHeight.current, marginBottom: (options.length - renderLast) * lineHeight.current}}>\r\n            {visibleOptions.map((opt, idx) => (opt.value != null\r\n              ? <SelectOption key={opt.id} selected={focusedIndex === idx + renderFirst} {...opt} setValue={setValue} setFocus={setFocus} renderOption={renderOption} search={search}/>\r\n              : <SelectGroup key={opt.id} depth={opt.depth} title={opt.title} renderHeader={renderHeader}/>\r\n            ))}\r\n          </ul>\r\n        ) : <div className=\"no-results\">{noResultsText(searchTerm)}</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faLock, faTimes, faChevronDown } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport './Select.scss';\r\n\r\nimport SelectMenu from './SelectMenu';\r\n\r\nconst optionName = opt => typeof opt === \"object\" ? opt.name : opt;\r\n\r\nexport const underlinerFunc = (value, regex) => {\r\n  let found = false;\r\n  return value.split(regex).map((str, index) => {\r\n    if (!found && str.match(regex)) {\r\n      found = true;\r\n      return <em key={index}>{str}</em>;\r\n    } else {\r\n      return str;\r\n    }\r\n  });\r\n};\r\n\r\nconst defaultCallbacks = {\r\n  renderOption: (opt, search) => <span>{search ? underlinerFunc(optionName(opt), search) : optionName(opt)}</span>,\r\n  renderValue: opt => <span>{optionName(opt)}</span>,\r\n  renderHeader: name => <span>{name}</span>,\r\n  searchFunc: (opt, search) => optionName(opt).match(search),\r\n  placeholder: \"Select option...\",\r\n  noResultsText: term => term ? `No results match \"${term}\"` : \"No results\",\r\n  isDisabled: opt => (typeof opt === \"object\" ? !!opt.disabled : false),\r\n};\r\n\r\nconst Select = React.memo(React.forwardRef(function Select(props, ref) {\r\n  const {\r\n    options,\r\n    width,\r\n    renderOption = defaultCallbacks.renderOption,\r\n    renderValue = defaultCallbacks.renderValue,\r\n    isDisabled = defaultCallbacks.isDisabled,\r\n    renderHeader = defaultCallbacks.renderHeader,\r\n    placeholder = defaultCallbacks.placeholder,\r\n    value,\r\n    onChange,\r\n    className,\r\n    menuClass,\r\n    searchLimit = -1,\r\n    searchMiddle = false,\r\n    searchFunc = defaultCallbacks.searchFunc,\r\n    tabIndex = \"-1\",\r\n    maxHeight = 300,\r\n    noResultsText = defaultCallbacks.noResultsText,\r\n    virtualScroll = false,\r\n    allowEmpty = false,\r\n    disabled = false,\r\n    ...otherProps\r\n  } = props;\r\n\r\n  const [isOpen, setOpen] = React.useState(null);\r\n  const onToggle = React.useCallback(() => setOpen(open => {\r\n    if (open || disabled) {\r\n      return null;\r\n    } else {\r\n      return \"ui-drop-bottom ui-drop-test\";\r\n    }\r\n  }), [disabled]);\r\n  const onClose = React.useCallback(() => setOpen(null), []);\r\n  const valueRef = React.useRef();\r\n\r\n  const menuRef = React.useRef();\r\n  React.useLayoutEffect(() => {\r\n    if (isOpen && isOpen.includes(\"ui-drop-test\") && menuRef.current) {\r\n      let overflowParent = valueRef.current.parentNode;\r\n      let parentStyle = window.getComputedStyle(overflowParent);\r\n      while (overflowParent !== document.documentElement && parentStyle.overflow === \"visible\") {\r\n        overflowParent = overflowParent.parentElement;\r\n        parentStyle = window.getComputedStyle(overflowParent);\r\n      }\r\n      const parentBox = overflowParent.getBoundingClientRect();\r\n      const parentTop = parentBox.top + (parseFloat(parentStyle.paddingTop) || 0) + (parseFloat(parentStyle.borderTopWidth) || 0);\r\n      const parentBottom = parentBox.bottom - (parseFloat(parentStyle.paddingBottom) || 0) - (parseFloat(parentStyle.borderBottomWidth) || 0);\r\n      const valueBox = valueRef.current.getBoundingClientRect();\r\n      const height = menuRef.current.offsetHeight;\r\n      if (valueBox.bottom + height > parentBottom && valueBox.bottom - height - parentBottom > parentTop - valueBox.top - height) {\r\n        setOpen(\"ui-drop-top\");\r\n      } else {\r\n        setOpen(\"ui-drop-bottom\");\r\n      }\r\n    }\r\n  }, [isOpen]);\r\n\r\n  React.useImperativeHandle(ref, () => ({\r\n    focus() {\r\n      if (!isOpen) {\r\n        onToggle();\r\n      }\r\n    }\r\n  }), [isOpen, onToggle]);\r\n\r\n  const onSetValue = React.useCallback(value => {\r\n    setOpen(false);\r\n    onChange(value);\r\n    valueRef.current.focus();\r\n  }, [onChange]);\r\n\r\n  const onClear = React.useCallback(e => {\r\n    onSetValue(null);\r\n    e.stopPropagation();\r\n  }, [onSetValue]);\r\n\r\n  const onKeyDown = React.useCallback(e => {\r\n    if (disabled) return;\r\n    switch (e.key) {\r\n    case \"Enter\":\r\n      onToggle();\r\n      break;\r\n    case \"Del\":\r\n    case \"Delete\":\r\n      if (allowEmpty && value != null) {\r\n        onSetValue(null);\r\n      }\r\n      break;\r\n    // no default\r\n    }\r\n  }, [onToggle, onSetValue, allowEmpty, value, disabled]);\r\n\r\n  let menu = null;\r\n  if (isOpen) {\r\n    menu = <SelectMenu\r\n      options={options}\r\n      className={menuClass}\r\n      renderOption={renderOption}\r\n      isDisabled={isDisabled}\r\n      renderHeader={renderHeader}\r\n      value={value}\r\n      setValue={onSetValue}\r\n      searchLimit={searchLimit}\r\n      searchMiddle={searchMiddle}\r\n      searchFunc={searchFunc}\r\n      onClose={onClose}\r\n      valueDiv={valueRef}\r\n      align={isOpen}\r\n      maxHeight={maxHeight}\r\n      virtualScroll={virtualScroll}\r\n      noResultsText={noResultsText}\r\n      menuRef={menuRef}\r\n    />;\r\n  }\r\n\r\n  return (\r\n    <div className={classNames(\"ui-Select\", className, isOpen)} style={{width}} {...otherProps}>\r\n      <div className={classNames(\"ui-Select-value\", {\"ui-select-empty\": value == null, \"ui-has-clear\": allowEmpty && value != null, \"ui-select-disabled\": disabled})}\r\n           ref={valueRef} onClick={onToggle} onKeyDown={onKeyDown} tabIndex={disabled ? null : tabIndex}>\r\n        {value != null ? renderValue(value) : placeholder}\r\n        <FontAwesomeIcon icon={disabled ? faLock : faChevronDown} className={\"ui-Select-arrow\"}/>\r\n        {!!(allowEmpty && value != null && !disabled) && <FontAwesomeIcon icon={faTimes} className={\"ui-Select-clear\"} onClick={onClear}/>}\r\n      </div>\r\n      {menu}\r\n    </div>\r\n  );\r\n}));\r\n\r\nSelect.defaultCallbacks = defaultCallbacks;\r\n\r\nexport default Select;\r\n","export const serverList = fetch('https://api.nexushub.co/wow-classic/v1/servers/full/').then(r => r.json());\r\n\r\nconst dataCache = {};\r\n\r\nfunction merge(a, h) {\r\n  if (a && h) {\r\n    return {quantity: a.quantity + h.quantity, marketValue: Math.min(a.marketValue, h.marketValue), faction: a.marketValue < h.marketValue ? \"alliance\" : \"horde\"};\r\n  } else if (a) {\r\n    return {...a, faction: \"alliance\"};\r\n  } else if (h) {\r\n    return {...h, faction: \"horde\"};\r\n  }\r\n}\r\n\r\nexport function loadData(server, faction) {\r\n  const slug = `${server}-${faction}`;\r\n  if (dataCache[slug]) return dataCache[slug];\r\n  if (faction === \"both\") {\r\n    return dataCache[slug] = Promise.all([loadData(server, \"alliance\"), loadData(server, \"horde\")]).then(([alliance, horde]) => {\r\n      const keys = new Set([...Object.keys(alliance), ...Object.keys(horde)]);\r\n      return Object.fromEntries([...keys].map(key => [key, merge(alliance[key], horde[key])]));\r\n    });\r\n  } else {\r\n    return dataCache[slug] = fetch(`https://api.nexushub.co/wow-classic/v1/items/${slug}/`)\r\n      .then(r => r.json())\r\n      .then(r => Object.fromEntries(r.data.map(({itemId, quantity, marketValue}) => [itemId, {quantity, marketValue}])));\r\n  }\r\n}\r\n","import crafting from './crafting.json';\r\nimport quests from './quests.json';\r\n\r\nObject.assign(crafting, quests);\r\n\r\nexport default crafting;\r\n","import { loadData } from './nexushub';\r\nimport Data from './data';\r\n\r\nexport default async function calculate(server, faction) {\r\n  const data = await loadData(server, faction);\r\n\r\n  const price = r => Math.min(...[r.vendorPrice, r.marketValue, r.craftingPrice, r.bindOnPickup ? 0 : Infinity].filter(x => !isNaN(x)));\r\n\r\n  const results = {};\r\n  function process(item) {\r\n    if (results[item] === \"processing\") throw Error(`cyclical dependency for ${item}`);\r\n    if (!results[item]) {\r\n      const info = Data[item];\r\n      if (!info) {\r\n        throw Error(`item not found: ${item}`);\r\n      }\r\n      const r = results[item] = {};\r\n      r.id = info.id;\r\n      r.quality = info.quality;\r\n      if (info.id && data[info.id]) {\r\n        Object.assign(r, data[info.id]);\r\n      }\r\n      if (info.vendor) {\r\n        r.vendorPrice = info.vendor;\r\n      }\r\n      r.category = info.category;\r\n      if (info.reagents) {\r\n        r.crafting = info.reagents;\r\n        r.requiredMoney = info.requiredMoney || 0;\r\n        r.amountCrafted = ((info.craftMin || 1) + (info.craftMax || 1)) / 2;\r\n        r.craftMin = info.craftMin || 1;\r\n        r.craftingPrice = Object.entries(r.crafting).reduce((total, [name, quantity]) => total + process(name) * quantity, r.requiredMoney) / r.amountCrafted;\r\n      } else if (info.bindOnPickup) {\r\n        r.bindOnPickup = true;\r\n      }\r\n    }\r\n    return price(results[item]);\r\n  }\r\n  Object.keys(Data).forEach(n => process(n));\r\n  return results;\r\n}\r\n","import React from 'react';\nimport './App.scss';\n\n//import Select from 'react-select';\n//import AsyncSelect from 'react-select/async';\nimport Select, { underlinerFunc } from './select';\n\nimport { serverList } from './nexushub';\n\nimport Data from './data';\nimport calculate from './logic';\n\nfunction usePersistentState(key, initialValue) {\n  const [value, setValue] = React.useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item != null ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  });\n  React.useEffect(() => {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error(error);\n    }\n  }, [key, value]);\n  return [value, setValue];\n}\n\nconst serverOptions = serverList.then(servers => {\n  const regions = {};\n  servers.forEach(({slug, name, region}) => {\n    if (!regions[region]) regions[region] = [];\n    regions[region].push({id: slug, name});\n  });\n  return Object.entries(regions).map(([region, list]) => {\n    list.sort(({name: name1}, {name: name2}) => name1.localeCompare(name2));\n    return {title: region, options: list};\n  });\n});\n\nconst factionOptions = [\n  {id: \"alliance\", name: \"Alliance\"},\n  {id: \"horde\", name: \"Horde\"},\n  {id: \"both\", name: \"Both\"},\n];\n\nconst profNames = {alchemy: \"Alchemy\", blacksmithing: \"Blacksmithing\", cooking: \"Cooking\", enchanting: \"Enchanting\", engineering: \"Engineering\", firstaid: \"First Aid\", leatherworking: \"Leatherworking\", tailoring: \"Tailoring\"};\nconst categoryNames = {...profNames, quest: \"Quests\", tierset: \"Item Sets\", \"\": \"Misc\"};\n\nfunction itemOptions() {\n  const categories = {};\n  Object.entries(Data).filter(([name, data]) => data.reagents).forEach(([name, data]) => {\n    categories[data.category || \"\"] = (categories[data.category || \"\"] || []);\n    categories[data.category || \"\"].push(name);\n  });\n  return Object.entries(categories).map(([cat, list]) => ({title: categoryNames[cat], options: list}));\n}\n\nfunction Money({value}) {\n  if (!isFinite(value)) {\n    return \"Not available\";\n  }\n  if (!value) {\n    return \"0\";\n  }\n  const gold = Math.floor(value / 10000);\n  const silver = Math.floor(value / 100) % 100;\n  const copper = Math.floor(value) % 100;\n  return (\n    <span>\n      {gold !== 0 && <span className=\"money-gold\">{gold}</span>}{gold !== 0 && (silver + copper) !== 0 && \" \"}\n      {silver !== 0 && <span className=\"money-silver\">{silver}</span>}{silver !== 0 && copper !== 0 && \" \"}\n      {copper !== 0 && <span className=\"money-copper\">{copper}</span>}\n    </span>\n  );\n}\n\nfunction itemDefault(results, item) {\n  const data = results[item];\n  if (!data) {\n    debugger;\n  }\n  if (!isNaN(data.craftingPrice) && (!data.marketValue || data.craftingPrice < data.marketValue)) {\n    return \"crafting\";\n  } else {\n    return \"market\";\n  }\n}\n\nfunction itemPrice(results, item, overrides) {\n  const data = results[item];\n  if (data.vendorPrice) {\n    return data.vendorPrice;\n  }\n  const mode = overrides[item] || itemDefault(results, item);\n  if (mode === \"crafting\" && data.crafting) {\n    return craftingPrice(results, item, overrides) / data.amountCrafted;\n  } else if (data.bindOnPickup) {\n    return 0;\n  } else {\n    return data.marketValue || Infinity;\n  }\n}\n\nfunction craftingPrice(results, item, overrides) {\n  return Object.entries(results[item].crafting).reduce((total, [name, quantity]) => total + itemPrice(results, name, overrides) * quantity, results[item].requiredMoney);\n}\n\nfunction profLabel(data) {\n  if (profNames[data.category]) {\n    if (data.amountCrafted !== 1) {\n      return <span><span className={\"trade-icon trade-\" + data.category}/>{profNames[data.category]} (per {data.amountCrafted}): </span>;\n    } else {\n      return <span><span className={\"trade-icon trade-\" + data.category}/>{profNames[data.category]}: </span>;\n    }\n  } else {\n    return \"\";\n  }\n}\n\nfunction shoppingList(list, results, item, count, overrides) {\n  const mode = overrides[item] || itemDefault(results, item);\n  const data = results[item];\n  if (data.vendorPrice || !data.crafting || mode !== \"crafting\") {\n    list[item] = (list[item] || 0) + count;\n  } else {\n    const numCraft = Math.ceil(count / data.craftMin);\n    Object.entries(data.crafting).forEach(([name, quantity]) => shoppingList(list, results, name, quantity * numCraft, overrides));\n    if (data.requiredMoney) {\n      list.money = (list.money || 0) + data.requiredMoney;\n    }\n  }\n  return list;\n}\n\nfunction ItemLink({name, data, ...props}) {\n  if (data.id) {\n    return <a className={\"quality-\" + data.quality} href={`https://classic.wowhead.com/item=${data.id}`} target=\"_blank\" rel=\"noreferrer\" {...props}>{name}</a>;\n  } else {\n    return <span className={\"quality-\" + data.quality}>{name}</span>;\n  }\n}\n\nfunction ResultView({item, count, ...props}) {\n  const {results, overrides, setOverrides, setShopping} = props;\n  const setMarket = React.useCallback(() => setOverrides(ov => ({...ov, [item]: \"market\"})), [setOverrides, item]);\n  const setCrafting = React.useCallback(() => setOverrides(ov => ({...ov, [item]: \"crafting\"})), [setOverrides, item]);\n\n  const addShopping = React.useCallback(() => setShopping(s => ({...s, [item]: (s[item] || 0) + 1})), [setShopping, item]);\n\n  const data = results[item];\n  if (!data) return null;\n\n  let price = null;\n  const mode = overrides[item] || itemDefault(results, item);\n\n  if (data.vendorPrice) {\n    price = <React.Fragment>Vendor: <Money value={data.vendorPrice}/></React.Fragment>;\n  } else if (!data.marketValue && !data.crafting) {\n    price = data.bindOnPickup ? \"Bind on Pickup\" : \"Not available\";\n  } else if (data.marketValue || data.craftingPrice != null) {\n    const cprice = data.crafting ? craftingPrice(results, item, overrides) : 0;\n    if (data.marketValue || cprice) {\n      price = (\n        <React.Fragment>\n          {!!data.marketValue && <span onClick={setMarket} className={mode === \"market\" ? \"active\" : \"inactive\"}>Market{data.faction ? ` (${data.faction})` : \"\"}: <Money value={data.marketValue}/> (quantity: {data.quantity})</span>}\n          {!!(data.marketValue && data.crafting) && \" / \"}\n          {cprice > 0 && <span onClick={setCrafting} className={mode === \"crafting\" ? \"active\" : \"inactive\"}>{profLabel(data)}<Money value={cprice}/></span>}\n        </React.Fragment>\n      );\n    }\n  }\n  return (\n    <div className=\"item\">\n      <div className=\"header\">{!!count && <span className=\"count\">{count}x</span>}<ItemLink name={item} data={data}/>{!!price && \" \"}{!!price && <span className=\"add-list\" onClick={addShopping}>(add)</span>}{!!price && \" - \"}{price}</div>\n      {!!(!data.vendorPrice && mode === \"crafting\" && data.crafting) && (\n        <div className=\"crafting\">\n          {Object.entries(data.crafting).map(([name, quantity]) => <ResultView key={name} item={name} count={quantity} {...props}/>)}\n          {!!data.requiredMoney && (\n            <div className=\"item\">\n              <div className=\"header\">Required Money: <Money value={data.requiredMoney}/></div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ShoppingItem({results, item, count, setShopping}) {\n  const onChange = React.useCallback(e => setShopping(list => {\n    list = {...list};\n    const value = parseInt(e.target.value);\n    if (value && !isNaN(value)) {\n      list[item] = value;\n    } else {\n      delete list[item];\n    }\n    return list;\n  }), [item, setShopping]);\n\n  return <li><input type=\"number\" className=\"task-counter\" value={count} onChange={onChange}/> <ItemLink name={item} data={results[item]}/></li>;\n}\n\nfunction ShoppingList({results, overrides, shopping, setShopping}) {\n  const [list, total] = React.useMemo(() => {\n    const list = Object.entries(Object.entries(shopping).reduce((list, [item, count]) => shoppingList(list, results, item, count, overrides), {}))\n      .filter(([name, count]) => count > 0)\n      .map(([name, count]) => {\n        if (name === \"money\") {\n          return [name, count, count, 4];\n        } else {\n          const data = results[name];\n          if (data.vendorPrice) {\n            return [name, count, data.vendorPrice * count, 3];\n          } else if (data.bindOnPickup) {\n            return [name, count, 0, 0];\n          } else if (!data.marketValue) {\n            return [name, count, Infinity, 1];\n          } else {\n            return [name, count, data.marketValue * count, 2];\n          }\n        }\n      });\n    const total = list.reduce((cur, [n, c, p, s]) => cur + p, 0);\n    list.sort(([n1, c1, p1, s1], [n2, c2, p2, s2]) => (s1 === s2 ? p2 - p1 : s1 - s2));\n    return [list, total];\n  }, [results, overrides, shopping]);\n  const clearList = React.useCallback(() => setShopping({}), [setShopping]);\n  if (!Object.keys(shopping).length) {\n    return null;\n  }\n  return (\n    <div className=\"shopping-list\">\n      <div className=\"header\">Shopping for <span className=\"add-list\" onClick={clearList}>(clear)</span></div>\n      <ul>\n        {Object.entries(shopping).map(([item, count]) => <ShoppingItem key={item} results={results} item={item} count={shopping[item]} setShopping={setShopping}/>)}\n      </ul>\n      <div className=\"header\">Items to buy - <Money value={total}/></div>\n      <ul>\n        {list.map(([name, count]) => {\n          if (name === \"money\") {\n            return <li>Money: <Money value={count}/></li>\n          }\n          const data = results[name];\n          let price = null;\n          if (data.vendorPrice) {\n            price = <span>Vendor: <Money value={data.vendorPrice * count}/></span>;\n          } else if (!data.marketValue) {\n            price = data.bindOnPickup ? \"Bind on Pickup\" : \"Not available\";\n          } else {\n            price = <span>Market{data.faction ? ` (${data.faction})` : \"\"}: <Money value={data.marketValue * count}/></span>;\n          }\n          return <li><span className=\"count\">{count}x</span><ItemLink name={name} data={results[name]}/> - {price}</li>;\n        })}\n      </ul>\n    </div>\n  );\n}\n\nconst preventDefault = e => e.preventDefault();\nfunction renderItem(name, search) {\n  const title = search ? underlinerFunc(name, search) : name;\n  return Data[name] ? <ItemLink name={title} data={Data[name]} onClick={preventDefault}/> : <span>{title}</span>;\n}\n\nexport default function App() {\n  const [serverList, setServerList] = React.useState([]);\n  React.useEffect(() => {\n    serverOptions.then(opt => setServerList(opt));\n  }, []);\n\n  const [server, setServer] = usePersistentState(\"wowcrafting-server-v2\");\n  const [faction, setFaction] = usePersistentState(\"wowcrafting-faction-v2\", factionOptions[0]);\n  const [item, setItem] = React.useState();\n  const [results, setResults] = React.useState();\n  const [overrides, setOverrides] = React.useState({});\n  const [shopping, setShopping] = React.useState({});\n\n  const onServerChange = React.useCallback(v => {\n    setResults(null);\n    setOverrides({});\n    setServer(v);\n  }, [setServer]);\n  const onFactionChange = React.useCallback(v => {\n    setResults(null);\n    setOverrides({});\n    setFaction(v);\n  }, [setFaction]);\n  const onItemChange = React.useCallback(v => {\n    setItem(v);\n  }, []);\n\n  const toCalc = React.useRef();\n  React.useEffect(() => {\n    if (!server || !faction) return;\n    const slug = `${server.id}-${faction.id}`;\n    toCalc.current = slug;\n    setResults(true);\n    calculate(server.id, faction.id).then(data => {\n      if (toCalc.current === slug) {\n        setResults(data);\n      }\n    });\n  }, [server, faction]);\n\n  return (\n    <div className=\"App\">\n      <div className=\"config\">\n        <Select className=\"select-server\" value={server} onChange={onServerChange} options={serverList} placeholder=\"Select server...\" searchLimit={10}/>\n        <Select className=\"select-faction\" value={faction} onChange={onFactionChange} options={factionOptions}/>\n        {!!(server && faction) && <Select className=\"select-item\" renderOption={renderItem} value={item} onChange={onItemChange} options={itemOptions} placeholder=\"Select item...\" virtualScroll searchLimit={10}/>}\n      </div>\n      {!!(results && item) && (\n        <div className=\"Results\">\n          {results === true ? (\n            <div className=\"calculating\">Calculating...</div>\n          ) : (\n            <div className=\"results-main\">\n              <ResultView results={results} item={item} overrides={overrides} setOverrides={setOverrides} shopping={shopping} setShopping={setShopping}/>\n            </div>\n          )}\n          {results !== true && <ShoppingList results={results} overrides={overrides} shopping={shopping} setShopping={setShopping}/>}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './reset.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}