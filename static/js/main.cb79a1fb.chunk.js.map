{"version":3,"sources":["nexushub.js","data.js","logic.js","App.js","index.js"],"names":["serverList","fetch","then","r","json","dataCache","loadData","server","faction","slug","Promise","all","alliance","horde","keys","Set","Object","fromEntries","map","key","a","h","quantity","marketValue","Math","min","data","itemId","assign","crafting","quests","process","item","results","Error","info","Data","id","quality","vendor","vendorPrice","category","reagents","requiredMoney","amountCrafted","craftMin","craftMax","craftingPrice","entries","reduce","total","name","bindOnPickup","price","Infinity","filter","x","isNaN","forEach","n","usePersistentState","initialValue","React","useState","window","localStorage","getItem","JSON","parse","error","console","value","setValue","useEffect","setItem","stringify","serverOptions","servers","regions","region","push","label","list","sort","name1","name2","localeCompare","options","factionOptions","profNames","alchemy","blacksmithing","cooking","enchanting","engineering","firstaid","leatherworking","tailoring","categoryNames","quest","tierset","itemOptions","term","callback","length","toLowerCase","categories","includes","cat","Money","isFinite","gold","floor","silver","copper","className","itemDefault","overrides","itemPrice","profLabel","shoppingList","count","mode","numCraft","ceil","money","ItemLink","href","target","rel","ResultView","props","setOverrides","setShopping","setMarket","useCallback","ov","setCrafting","addShopping","s","Fragment","cprice","onClick","ShoppingItem","onChange","e","parseInt","type","ShoppingList","shopping","useMemo","cur","p","p1","s1","p2","s2","clearList","App","setServerList","opt","setServer","setFaction","setResults","onServerChange","v","onFactionChange","onItemChange","toCalc","useRef","current","calculate","placeholder","loadOptions","noOptionsMessage","controlShouldRenderValue","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cb79a1fb.chunk.js","sourcesContent":["export const serverList = fetch('https://api.nexushub.co/wow-classic/v1/servers/full/').then(r => r.json());\r\n\r\nconst dataCache = {};\r\n\r\nfunction merge(a, h) {\r\n  if (a && h) {\r\n    return {quantity: a.quantity + h.quantity, marketValue: Math.min(a.marketValue, h.marketValue), faction: a.marketValue < h.marketValue ? \"alliance\" : \"horde\"};\r\n  } else if (a) {\r\n    return {...a, faction: \"alliance\"};\r\n  } else if (h) {\r\n    return {...h, faction: \"horde\"};\r\n  }\r\n}\r\n\r\nexport function loadData(server, faction) {\r\n  const slug = `${server}-${faction}`;\r\n  if (dataCache[slug]) return dataCache[slug];\r\n  if (faction === \"both\") {\r\n    return dataCache[slug] = Promise.all([loadData(server, \"alliance\"), loadData(server, \"horde\")]).then(([alliance, horde]) => {\r\n      const keys = new Set([...Object.keys(alliance), ...Object.keys(horde)]);\r\n      return Object.fromEntries([...keys].map(key => [key, merge(alliance[key], horde[key])]));\r\n    });\r\n  } else {\r\n    return dataCache[slug] = fetch(`https://api.nexushub.co/wow-classic/v1/items/${slug}/`)\r\n      .then(r => r.json())\r\n      .then(r => Object.fromEntries(r.data.map(({itemId, quantity, marketValue}) => [itemId, {quantity, marketValue}])));\r\n  }\r\n}\r\n","import crafting from './crafting.json';\r\nimport quests from './quests.json';\r\n\r\nObject.assign(crafting, quests);\r\n\r\nexport default crafting;\r\n","import { loadData } from './nexushub';\r\nimport Data from './data';\r\n\r\nexport default async function calculate(server, faction) {\r\n  const data = await loadData(server, faction);\r\n\r\n  const price = r => Math.min(...[r.vendorPrice, r.marketValue, r.craftingPrice, r.bindOnPickup ? 0 : Infinity].filter(x => !isNaN(x)));\r\n\r\n  const results = {};\r\n  function process(item) {\r\n    if (results[item] === \"processing\") throw Error(`cyclical dependency for ${item}`);\r\n    if (!results[item]) {\r\n      const info = Data[item];\r\n      if (!info) {\r\n        throw Error(`item not found: ${item}`);\r\n      }\r\n      const r = results[item] = {};\r\n      r.id = info.id;\r\n      r.quality = info.quality;\r\n      if (info.id && data[info.id]) {\r\n        Object.assign(r, data[info.id]);\r\n      }\r\n      if (info.vendor) {\r\n        r.vendorPrice = info.vendor;\r\n      }\r\n      r.category = info.category;\r\n      if (info.reagents) {\r\n        r.crafting = info.reagents;\r\n        r.requiredMoney = info.requiredMoney || 0;\r\n        r.amountCrafted = ((info.craftMin || 1) + (info.craftMax || 1)) / 2;\r\n        r.craftMin = info.craftMin || 1;\r\n        r.craftingPrice = Object.entries(r.crafting).reduce((total, [name, quantity]) => total + process(name) * quantity, r.requiredMoney) / r.amountCrafted;\r\n      } else if (info.bindOnPickup) {\r\n        r.bindOnPickup = true;\r\n      }\r\n    }\r\n    return price(results[item]);\r\n  }\r\n  Object.keys(Data).forEach(n => process(n));\r\n  return results;\r\n}\r\n","import React from 'react';\nimport './App.scss';\n\nimport Select from 'react-select';\nimport AsyncSelect from 'react-select/async';\n\nimport { serverList } from './nexushub';\n\nimport Data from './data';\nimport calculate from './logic';\n\nfunction usePersistentState(key, initialValue) {\n  const [value, setValue] = React.useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item != null ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  });\n  React.useEffect(() => {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error(error);\n    }\n  }, [key, value]);\n  return [value, setValue];\n}\n\nconst serverOptions = serverList.then(servers => {\n  const regions = {};\n  servers.forEach(({slug, name, region}) => {\n    if (!regions[region]) regions[region] = [];\n    regions[region].push({value: slug, label: name});\n  });\n  return Object.entries(regions).map(([region, list]) => {\n    list.sort(({label: name1}, {label: name2}) => name1.localeCompare(name2));\n    return {label: region, options: list};\n  });\n});\n\nconst factionOptions = [\n  {value: \"alliance\", label: \"Alliance\"},\n  {value: \"horde\", label: \"Horde\"},\n  {value: \"both\", label: \"Both\"},\n];\n\nconst profNames = {alchemy: \"Alchemy\", blacksmithing: \"Blacksmithing\", cooking: \"Cooking\", enchanting: \"Enchanting\", engineering: \"Engineering\", firstaid: \"First Aid\", leatherworking: \"Leatherworking\", tailoring: \"Tailoring\"};\nconst categoryNames = {...profNames, quest: \"Quests\", tierset: \"Tier Sets\", \"\": \"Misc\"};\n\nconst itemOptions = (term, callback) => {\n  if (term.length < 3) callback([]);\n  term = term.toLowerCase();\n  const categories = {};\n  Object.entries(Data).filter(([name, data]) => data.reagents && name.toLowerCase().includes(term)).forEach(([name, data]) => {\n    categories[data.category || \"\"] = (categories[data.category || \"\"] || []);\n    categories[data.category || \"\"].push({value: name, label: name});\n  });\n  callback(Object.entries(categories).map(([cat, list]) => ({label: categoryNames[cat], options: list})));\n}\n\nfunction Money({value}) {\n  if (!isFinite(value)) {\n    return \"Not available\";\n  }\n  if (!value) {\n    return \"0\";\n  }\n  const gold = Math.floor(value / 10000);\n  const silver = Math.floor(value / 100) % 100;\n  const copper = Math.floor(value) % 100;\n  return (\n    <span>\n      {gold !== 0 && <span className=\"money-gold\">{gold}</span>}{gold !== 0 && (silver + copper) !== 0 && \" \"}\n      {silver !== 0 && <span className=\"money-silver\">{silver}</span>}{silver !== 0 && copper !== 0 && \" \"}\n      {copper !== 0 && <span className=\"money-copper\">{copper}</span>}\n    </span>\n  );\n}\n\nfunction itemDefault(results, item) {\n  const data = results[item];\n  if (!data) {\n    debugger;\n  }\n  if (!isNaN(data.craftingPrice) && (!data.marketValue || data.craftingPrice < data.marketValue)) {\n    return \"crafting\";\n  } else {\n    return \"market\";\n  }\n}\n\nfunction itemPrice(results, item, overrides) {\n  const data = results[item];\n  if (data.vendorPrice) {\n    return data.vendorPrice;\n  }\n  const mode = overrides[item] || itemDefault(results, item);\n  if (mode === \"crafting\" && data.crafting) {\n    return craftingPrice(results, item, overrides) / data.amountCrafted;\n  } else if (data.bindOnPickup) {\n    return 0;\n  } else {\n    return data.marketValue || Infinity;\n  }\n}\n\nfunction craftingPrice(results, item, overrides) {\n  return Object.entries(results[item].crafting).reduce((total, [name, quantity]) => total + itemPrice(results, name, overrides) * quantity, results[item].requiredMoney);\n}\n\nfunction profLabel(data) {\n  if (profNames[data.category]) {\n    if (data.amountCrafted !== 1) {\n      return <span><span className={\"trade-icon trade-\" + data.category}/>{profNames[data.category]} (per {data.amountCrafted}): </span>;\n    } else {\n      return <span><span className={\"trade-icon trade-\" + data.category}/>{profNames[data.category]}: </span>;\n    }\n  } else {\n    return \"\";\n  }\n}\n\nfunction shoppingList(list, results, item, count, overrides) {\n  const mode = overrides[item] || itemDefault(results, item);\n  const data = results[item];\n  if (data.vendorPrice || !data.crafting || mode !== \"crafting\") {\n    list[item] = (list[item] || 0) + count;\n  } else {\n    const numCraft = Math.ceil(count / data.craftMin);\n    Object.entries(data.crafting).forEach(([name, quantity]) => shoppingList(list, results, name, quantity * numCraft, overrides));\n    if (data.requiredMoney) {\n      list.money = (list.money || 0) + data.requiredMoney;\n    }\n  }\n  return list;\n}\n\nfunction ItemLink({name, data}) {\n  if (data.id) {\n    return <a className={\"quality-\" + data.quality} href={`https://classic.wowhead.com/item=${data.id}`} target=\"_blank\" rel=\"noreferrer\">{name}</a>;\n  } else {\n    return <span className={\"quality-\" + data.quality}>{name}</span>;\n  }\n}\n\nfunction ResultView({item, count, ...props}) {\n  const {results, overrides, setOverrides, setShopping} = props;\n  const setMarket = React.useCallback(() => setOverrides(ov => ({...ov, [item]: \"market\"})), [setOverrides, item]);\n  const setCrafting = React.useCallback(() => setOverrides(ov => ({...ov, [item]: \"crafting\"})), [setOverrides, item]);\n\n  const addShopping = React.useCallback(() => setShopping(s => ({...s, [item]: (s[item] || 0) + 1})), [setShopping, item]);\n\n  const data = results[item];\n  if (!data) return null;\n\n  let price = null;\n  const mode = overrides[item] || itemDefault(results, item);\n\n  if (data.vendorPrice) {\n    price = <React.Fragment>Vendor: <Money value={data.vendorPrice}/></React.Fragment>;\n  } else if (!data.marketValue && !data.crafting) {\n    price = data.bindOnPickup ? \"Bind on Pickup\" : \"Not available\";\n  } else if (data.marketValue || data.craftingPrice != null) {\n    const cprice = data.crafting ? craftingPrice(results, item, overrides) : 0;\n    if (data.marketValue || cprice) {\n      price = (\n        <React.Fragment>\n          {!!data.marketValue && <span onClick={setMarket} className={mode === \"market\" ? \"active\" : \"inactive\"}>Market{data.faction ? ` (${data.faction})` : \"\"}: <Money value={data.marketValue}/> (quantity: {data.quantity})</span>}\n          {!!(data.marketValue && data.crafting) && \" / \"}\n          {cprice > 0 && <span onClick={setCrafting} className={mode === \"crafting\" ? \"active\" : \"inactive\"}>{profLabel(data)}<Money value={cprice}/></span>}\n        </React.Fragment>\n      );\n    }\n  }\n  return (\n    <div className=\"item\">\n      <div className=\"header\">{!!count && <span className=\"count\">{count}x</span>}<ItemLink name={item} data={data}/>{!!price && \" \"}{!!price && <span className=\"add-list\" onClick={addShopping}>(add)</span>}{!!price && \" - \"}{price}</div>\n      {!!(!data.vendorPrice && mode === \"crafting\" && data.crafting) && (\n        <div className=\"crafting\">\n          {Object.entries(data.crafting).map(([name, quantity]) => <ResultView key={name} item={name} count={quantity} {...props}/>)}\n          {!!data.requiredMoney && (\n            <div className=\"item\">\n              <div className=\"header\">Required Money: <Money value={data.requiredMoney}/></div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ShoppingItem({results, item, count, setShopping}) {\n  const onChange = React.useCallback(e => setShopping(list => {\n    list = {...list};\n    const value = parseInt(e.target.value);\n    if (value && !isNaN(value)) {\n      list[item] = value;\n    } else {\n      delete list[item];\n    }\n    return list;\n  }), [item, setShopping]);\n\n  return <li><input type=\"number\" className=\"task-counter\" value={count} onChange={onChange}/> <ItemLink name={item} data={results[item]}/></li>;\n}\n\nfunction ShoppingList({results, overrides, shopping, setShopping}) {\n  const [list, total] = React.useMemo(() => {\n    const list = Object.entries(Object.entries(shopping).reduce((list, [item, count]) => shoppingList(list, results, item, count, overrides), {}))\n      .filter(([name, count]) => count > 0)\n      .map(([name, count]) => {\n        if (name === \"money\") {\n          return [name, count, count, 4];\n        } else {\n          const data = results[name];\n          if (data.vendorPrice) {\n            return [name, count, data.vendorPrice * count, 3];\n          } else if (data.bindOnPickup) {\n            return [name, count, 0, 0];\n          } else if (!data.marketValue) {\n            return [name, count, Infinity, 1];\n          } else {\n            return [name, count, data.marketValue * count, 2];\n          }\n        }\n      });\n    const total = list.reduce((cur, [n, c, p, s]) => cur + p, 0);\n    list.sort(([n1, c1, p1, s1], [n2, c2, p2, s2]) => (s1 === s2 ? p2 - p1 : s1 - s2));\n    return [list, total];\n  }, [results, overrides, shopping]);\n  const clearList = React.useCallback(() => setShopping({}), [setShopping]);\n  if (!Object.keys(shopping).length) {\n    return null;\n  }\n  return (\n    <div className=\"shopping-list\">\n      <div className=\"header\">Shopping for <span className=\"add-list\" onClick={clearList}>(clear)</span></div>\n      <ul>\n        {Object.entries(shopping).map(([item, count]) => <ShoppingItem key={item} results={results} item={item} count={shopping[item]} setShopping={setShopping}/>)}\n      </ul>\n      <div className=\"header\">Items to buy - <Money value={total}/></div>\n      <ul>\n        {list.map(([name, count]) => {\n          if (name === \"money\") {\n            return <li>Money: <Money value={count}/></li>\n          }\n          const data = results[name];\n          let price = null;\n          if (data.vendorPrice) {\n            price = <span>Vendor: <Money value={data.vendorPrice * count}/></span>;\n          } else if (!data.marketValue) {\n            price = data.bindOnPickup ? \"Bind on Pickup\" : \"Not available\";\n          } else {\n            price = <span>Market{data.faction ? ` (${data.faction})` : \"\"}: <Money value={data.marketValue * count}/></span>;\n          }\n          return <li><span className=\"count\">{count}x</span><ItemLink name={name} data={results[name]}/> - {price}</li>;\n        })}\n      </ul>\n    </div>\n  );\n}\n\nexport default function App() {\n  const [serverList, setServerList] = React.useState([]);\n  React.useEffect(() => {\n    serverOptions.then(opt => setServerList(opt));\n  }, []);\n\n  const [server, setServer] = usePersistentState(\"wowcrafting-server\");\n  const [faction, setFaction] = usePersistentState(\"wowcrafting-faction\", factionOptions[0]);\n  const [item, setItem] = React.useState();\n  const [results, setResults] = React.useState();\n  const [overrides, setOverrides] = React.useState({});\n  const [shopping, setShopping] = React.useState({});\n\n  const onServerChange = React.useCallback(v => {\n    setResults(null);\n    setOverrides({});\n    setServer(v);\n  }, [setServer]);\n  const onFactionChange = React.useCallback(v => {\n    setResults(null);\n    setOverrides({});\n    setFaction(v);\n  }, [setFaction]);\n  const onItemChange = React.useCallback(v => {\n    setItem(v);\n  }, []);\n\n  const toCalc = React.useRef();\n  React.useEffect(() => {\n    if (!server || !faction) return;\n    const slug = `${server.value}-${faction.value}`;\n    toCalc.current = slug;\n    setResults(true);\n    calculate(server.value, faction.value).then(data => {\n      if (toCalc.current === slug) {\n        setResults(data);\n      }\n    });\n  }, [server, faction]);\n\n  return (\n    <div className=\"App\">\n      <div className=\"config\">\n        <Select className=\"select-server\" value={server} onChange={onServerChange} options={serverList} placeholder=\"Select server...\"/>\n        <Select className=\"select-faction\" value={faction} onChange={onFactionChange} options={factionOptions}/>\n        {!!(server && faction) && <AsyncSelect className=\"select-item\" value={item} onChange={onItemChange} loadOptions={itemOptions} noOptionsMessage={() => null} placeholder=\"Select item...\" controlShouldRenderValue={false}/>}\n      </div>\n      {!!(results && item) && (\n        <div className=\"Results\">\n          {results === true ? (\n            <div className=\"calculating\">Calculating...</div>\n          ) : (\n            <div className=\"results-main\">\n              <ResultView results={results} item={item.value} overrides={overrides} setOverrides={setOverrides} shopping={shopping} setShopping={setShopping}/>\n            </div>\n          )}\n          {results !== true && <ShoppingList results={results} overrides={overrides} shopping={shopping} setShopping={setShopping}/>}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './reset.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}